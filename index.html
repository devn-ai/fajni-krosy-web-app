<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Test Telegram WebApp</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #f7f7f7; margin: 0; padding: 40px;}
    .card { background: #fff; border-radius: 12px; box-shadow: 0 3px 12px rgba(0,0,0,0.08); max-width: 320px; margin: 0 auto; padding: 32px;}
    button { background: #229ED9; color: #fff; border: none; padding: 12px 22px; border-radius: 8px; font-size: 16px; cursor: pointer;}
  </style>
</head>
<body>
  <div class="card">
    <h1>Вітаю в Telegram WebApp!</h1>
    <p>Це тестова сторінка: ти вже бачиш мій вигляд як "лендінг".</p>
    <button onclick="Telegram.WebApp.close()">Закрити</button>
  </div>
  <div class="cart">
    <h2>Кошик</h2>
    <ul id="cart-list"></ul>
    <form id="checkout-form">
        <input name="name" type="text" placeholder="Ваше ім'я" required>
        <input name="phone" type="text" placeholder="Телефон" required>
        <input name="shoes" type="text" placeholder="Взуття" required>
        <button type="submit">Відправити замовлення</button>
    </form>
</div>
</body>
  <script>
    // Приклад товарів
let cart = [
  {name: "Товар 1", count: 2, price: 140},
  {name: "Товар 2", count: 1, price: 90}
];

function renderCart() {
  const cartList = document.getElementById('cart-list');
  cartList.innerHTML = '';
  cart.forEach(item => {
    cartList.innerHTML += `<li>${item.name} x${item.count} — ${item.price * item.count}₴</li>`;
  });
}
renderCart();
document.getElementById('checkout-form').onsubmit = function(e) {
  e.preventDefault();
  const webhookUrl = "https://hook.eu2.make.com/1ettzvhwvhnmag3f5otfig2ospqw2nd9"; 
  const form = e.target;
  const order = {
    name: form.name.value,
    phone: form.phone.value,
    shoes: form.shoes.value,
    cart: cart
  };

  fetch(webhookUrl, {
    method: "POST",
    body: JSON.stringify(order),
    headers: {"Content-Type": "application/json"}
  }).then(res => {
    if (res.ok) {
      window.Telegram.WebApp.close();
      alert("Дякуємо за замовлення!");
    }
  });
};

  </script>
</html>
